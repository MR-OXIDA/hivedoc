# 类型转化

### 隐式转换

Hive支持隐式转换，这意味着在某些情况下，Hive会自动将一个数据类型转换为另一个数据类型，以便执行操作或满足表达式的要求。以下是一些常见的隐式转换示例：

1.  数值型转换：当进行数学运算时，Hive会根据需要将整数转换为浮点数。 例如：

    ```
    SELECT 5 / 2;
    ```

    结果将是2.5，因为Hive将整数5和2都隐式转换为浮点数。
2.  字符串与数值型转换：在某些情况下，Hive可以将字符串转换为数值型，并且反之亦然。 例如：

    ```
    SELECT '10' + 5;
    ```

    结果将是15，因为Hive将字符串'10'隐式转换为整数。
3.  时间戳转换：Hive允许在时间戳和日期字符串之间进行隐式转换。 例如：

    ```
    SELECT CAST('2023-09-17' AS TIMESTAMP);
    ```

    这将把字符串'2023-09-17'隐式转换为时间戳类型。

请注意，尽管Hive支持隐式转换，但有时候可能会出现错误或不期望的结果。建议在代码中明确指定所需的类型转换，以避免潜在的问题。

### CAST函数

在Hive中，可以使用CAST函数进行类型转换。CAST函数允许将一个数据类型转换为另一个数据类型。

以下是一些常见的类型转换示例：

1.  将字符串转换为整数：

    ```
    SELECT CAST('123' AS INT);
    ```
2.  将整数转换为字符串：

    ```
    SELECT CAST(456 AS STRING);
    ```
3.  将浮点数转换为整数：

    ```
    SELECT CAST(3.14 AS INT);
    ```
4.  将日期字符串转换为日期类型：

    ```
    SELECT CAST('2023-09-17' AS DATE);
    ```
5.  将日期类型转换为字符串：

    ```
    SELECT CAST(DATE '2023-09-17' AS STRING);
    ```

需要注意的是，在进行类型转换时，要确保目标类型能够容纳源数据，否则可能会导致数据截断或错误结果。

此外，还可以使用内置函数来执行更复杂的类型转换操作，如FROM\_UNIXTIME函数用于将Unix时间戳转换为日期字符串，UNIX\_TIMESTAMP函数用于将日期字符串转换为Unix时间戳等。根据具体需求选择适当的函数和转换方式。

{% hint style="danger" %}
如果强制类型转换失败，如执行 CAST('X' AS INT)，表达式返回空值 NULL。
{% endhint %}
